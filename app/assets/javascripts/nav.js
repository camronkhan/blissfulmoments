// Generated by CoffeeScript 1.10.0
$(document).on('turbolinks:load', function() {
  var flickityBottom, topnavFlickityIsActive, topnavMainIsActive;
  console.log("$(document).on 'turbolinks:load', ->");
  topnavMainIsActive = true;
  topnavFlickityIsActive = true;
  if ($('.landing').length > 0) {
    console.log("$('.landing').length > 0");
    $('.topnav-main').hide();
    topnavMainIsActive = false;
    $('.topnav-flickity').hide();
    topnavFlickityIsActive = false;
    console.log("topnav-main: hidden, topnav-flickity: hidden, topnavMainIsActive: " + topnavMainIsActive + ", topnavFlickityIsActive: " + topnavFlickityIsActive);
  } else if ($('.flickity').length > 0) {
    console.log("$('.flickity').length > 0");
    $('.topnav-main').hide();
    topnavMainIsActive = false;
    $('.topnav-flickity').show();
    topnavFlickityIsActive = true;
    console.log("topnav-main: hidden, topnav-flickity: shown, topnavMainIsActive: " + topnavMainIsActive + ", topnavFlickityIsActive: " + topnavFlickityIsActive);
    flickityBottom = $('.flickity').offset().top + $('.flickity').height() - $('.topnav').height();
    console.log("flickityBottom: " + flickityBottom);
  } else {
    console.log("$('.flickity').length == 0");
    $('.topnav-main').show();
    $('.topnav-flickity').hide();
    topnavFlickityIsActive = false;
    console.log("topnav-main: shown, topnav-flickity: hidden, topnavFlickityIsActive: " + topnavFlickityIsActive);
  }
  $(window).resize(function() {
    console.log("$(window).resize ->");
    if ($('.flickity').length > 0) {
      console.log("$('.flickity').length > 0");
      flickityBottom = $('.flickity').offset().top + $('.flickity').height() - $('.topnav').height();
      console.log("resized flickityBottom: " + flickityBottom);
    }
    if (window.matchMedia('(min-width: 992px)').matches) {
      console.log("window.matchMedia('(min-width: 992px)').matches");
      $('.sidenav-mask').removeClass('is-active');
      $('.sidenav').css('width', '0');
      return console.log("Closing sidenav");
    }
  });
  $(window).scroll(function() {
    var windowTop;
    console.log("$(window).scroll ->");
    if ($('.flickity').length > 0) {
      console.log("$('.flickity').length > 0");
      windowTop = Math.round($(window).scrollTop());
      console.log("windowTop: " + windowTop);
      if (windowTop < flickityBottom) {
        console.log("windowTop < flickityBottom");
        if (topnavMainIsActive) {
          console.log("topnavMainIsActive: " + topnavMainIsActive);
          $('.topnav-main').fadeOut(500);
          topnavMainIsActive = false;
          $('.topnav-flickity').fadeIn(500);
          topnavFlickityIsActive = true;
          return console.log("topnav-main: fadeOut, topnav-flickity: fadeIn, topnavMainIsActive: " + topnavMainIsActive + ", topnavFlickityIsActive: " + topnavFlickityIsActive);
        }
      } else {
        console.log("windowTop >= flickityBottom");
        if (topnavFlickityIsActive) {
          console.log("topnavFlickityIsActive: " + topnavFlickityIsActive);
          $('.topnav-flickity').fadeOut(500);
          topnavFlickityIsActive = false;
          $('.topnav-main').fadeIn(500);
          topnavMainIsActive = true;
          return console.log("topnav-main: fadeIn, topnav-flickity: fadeOut, topnavMainIsActive: " + topnavMainIsActive + ", topnavFlickityIsActive: " + topnavFlickityIsActive);
        }
      }
    }
  });
  $('.open-sidenav').click(function() {
    $('.sidenav-mask').addClass('is-active');
    return $('.sidenav').css('width', '250px');
  });
  return $('.close-sidenav').click(function() {
    $('.sidenav-mask').removeClass('is-active');
    return $('.sidenav').css('width', '0');
  });
});

$(document).on('turbolinks:before-cache', function() {
  $('.sidenav-mask').removeClass('is-active');
  return $('.sidenav').css('width', '0');
});
