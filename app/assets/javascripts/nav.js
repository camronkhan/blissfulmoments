// Generated by CoffeeScript 1.10.0
$(document).on('turbolinks:load', function() {
  var featuredBottom, topnavFeaturedIsActive, topnavMainIsActive;
  console.log("$(document).on 'turbolinks:load', ->");
  topnavMainIsActive = true;
  topnavFeaturedIsActive = true;
  if ($('.featured').length > 0) {
    console.log("$('.featured').length > 0");
    $('.topnav-main').hide();
    topnavMainIsActive = false;
    $('.topnav-featured').show();
    topnavFeaturedIsActive = true;
    console.log("topnav-main: hidden, topnav-featured: shown, topnavMainIsActive: " + topnavMainIsActive + ", topnavFeaturedIsActive: " + topnavFeaturedIsActive);
    featuredBottom = $('.featured').offset().top + $('.featured').height() - $('.topnav').height();
    console.log("featuredBottom: " + featuredBottom);
  } else {
    console.log("$('.featured').length == 0");
    $('.topnav-featured').hide();
    topnavFeaturedIsActive = false;
    console.log("topnav-main: shown, topnav-featured: hidden, topnavFeaturedIsActive: " + topnavFeaturedIsActive);
  }
  $(window).resize(function() {
    console.log("$(window).resize ->");
    if ($('.featured').length > 0) {
      console.log("$('.featured').length > 0");
      featuredBottom = $('.featured').offset().top + $('.featured').height() - $('.topnav').height();
      console.log("resized featuredBottom: " + featuredBottom);
    }
    if (window.matchMedia('(min-width: 992px)').matches) {
      console.log("window.matchMedia('(min-width: 992px)').matches");
      $('.sidenav-mask').removeClass('is-active');
      $('.sidenav').css('width', '0');
      return console.log("Closing sidenav");
    }
  });
  $(window).scroll(function() {
    var windowTop;
    console.log("$(window).scroll ->");
    if ($('.featured').length > 0) {
      console.log("$('.featured').length > 0");
      windowTop = Math.round($(window).scrollTop());
      console.log("windowTop: " + windowTop);
      if (windowTop < featuredBottom) {
        console.log("windowTop < featuredBottom");
        if (topnavMainIsActive) {
          console.log("topnavMainIsActive: " + topnavMainIsActive);
          $('.topnav-main').fadeOut(500);
          topnavMainIsActive = false;
          $('.topnav-featured').fadeIn(500);
          topnavFeaturedIsActive = true;
          return console.log("topnav-main: fadeOut, topnav-featured: fadeIn, topnavMainIsActive: " + topnavMainIsActive + ", topnavFeaturedIsActive: " + topnavFeaturedIsActive);
        }
      } else {
        console.log("windowTop >= featuredBottom");
        if (topnavFeaturedIsActive) {
          console.log("topnavFeaturedIsActive: " + topnavFeaturedIsActive);
          $('.topnav-featured').fadeOut(500);
          topnavFeaturedIsActive = false;
          $('.topnav-main').fadeIn(500);
          topnavMainIsActive = true;
          return console.log("topnav-main: fadeIn, topnav-featured: fadeOut, topnavMainIsActive: " + topnavMainIsActive + ", topnavFeaturedIsActive: " + topnavFeaturedIsActive);
        }
      }
    }
  });
  $('.open-sidenav').click(function() {
    $('.sidenav-mask').addClass('is-active');
    return $('.sidenav').css('width', '250px');
  });
  return $('.close-sidenav').click(function() {
    $('.sidenav-mask').removeClass('is-active');
    return $('.sidenav').css('width', '0');
  });
});

$(document).on('turbolinks:before-cache', function() {
  $('.sidenav-mask').removeClass('is-active');
  return $('.sidenav').css('width', '0');
});
